# Ichime

Нативное приложение для сайта Anime 365, созданное специально для Apple TV.

## Скриншоты

![Ichime на Apple TV](https://github.com/user-attachments/assets/cf5c55d5-bcf9-4f00-a59c-136696117bf1)

Больше скриншотов можно найти на странице [Wiki → Скриншоты](https://github.com/midori-no-me/ichime/wiki/Скриншоты).

## Возможности приложения

Приложение покрывает все базовые сценарии пользования сайтом.

Просмотр серий:

- Все серии открываются в сторонних плеерах автоматически. На данный момент мы поддерживаем только [Infuse](https://apps.apple.com/app/id1136220934) и [VLC](https://apps.apple.com/app/id650377962). Эти плееры поддерживают субтитры в форматах ASS и SRT.
- Если досмотреть серию до конца, то она автоматически будет отмечена просмотренной. Так же, как это сделано на сайте.
- Выводим список следующих серий к просмотру так же, как на сайте они выводятся в секции "Серии к просмотру".

Каталог сериалов:

- Список онгоингов.
- Список тайтлов, сгруппированный по сезонам.
- Поиск.
- Показываем, когда выйдет следующая серия.
- Календарь онгоингов, который подтягивается из Shikimori.

Для получения информации о сериале мы используем разные источники, включая Shikimori и MyAnimeList (Jikan):

- Базовая информация о сериале, доступная на Anime 365.
- Моменты.
- Скриншоты сериала.
- Разные обложки.
- Список персонажей и сейю.
- Список авторов.
- Связанные сериалы (сиквелы, спин-оффы и т.п.).

Top Shelf:

- Если закрепить Ichime в верхнем ряду на домашнем экране Apple TV, то будем показывать в виджете секцию "Серии к просмотру" и расписание ближайших релизов.

## Как установить

Способы установки описаны на странице [Wiki → Как установить приложение](https://github.com/midori-no-me/ichime/wiki/Как-установить-приложение).

## Поддерживается ли iOS или iPadOS?

Последняя версия, поддерживающая iOS и iPadOS, — это [1.7.7](https://github.com/midori-no-me/ichime/releases/tag/1.7.7). В новых версиях мы отказались от поддержки всех ОС в пользу tvOS. Подробнее об этом мы рассказали в заметках к релизу [1.8.0](https://github.com/midori-no-me/ichime/releases/tag/1.8.0), в рамках которого поддержка и была прекращена.

## Разработка приложения

### Как собрать приложение

Чтобы собрать приложение:

1. Склонируйте репозиторий.

2. Установите [XcodeGen](https://github.com/yonaskolb/XcodeGen).

3. В корне директории выполните команду:

   ```bash
   xcodegen generate
   ```

   Эта команда сгенерирует конфигурационные файлы для Xcode.

4. Откройте проект в Xcode.

5. Если необходимо подписать приложение, у всех таргетов во вкладке Signing & Capabilities выберите Team.

6. Соберите приложение через Xcode.

### Кодстайл и линтеры

Мы используем официальный форматтер кодстайла для Swift: [swift-format](https://github.com/swiftlang/swift-format). Убедитесь, что у вас Swift 6.0 или новее. Также мы используем [SwiftFormat](https://github.com/nicklockwood/SwiftFormat) и [SwiftLint](https://github.com/realm/SwiftLint).

Перед коммитом не забудьте запустить автоматическое исправление кодстайла:

```bash
make format
```

В качестве линтера мы используем только [Periphery](https://github.com/peripheryapp/periphery) — он позволяет находить мертвый код.

Линтеры можно запустить командой:

```bash
make lint
```

### Git Hooks

Запускать XcodeGen и команды для исправления кодстайда можно автоматически с помощью Git Hooks.

Установите хуки с помощью команды:

```bash
make hooks
```
