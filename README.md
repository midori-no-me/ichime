# Ichime

Нативное приложение для сайта Anime 365, созданное специально для iOS и iPadOS.

## Скриншшоты
<a href="https://github.com/midori-no-me/ichime/assets/11390039/15fd0d10-5293-4cce-8036-9b6cb8b8f9a3"><img src="https://github.com/midori-no-me/ichime/assets/11390039/15fd0d10-5293-4cce-8036-9b6cb8b8f9a3" width="250" /></a>
<a href="https://github.com/midori-no-me/ichime/assets/11390039/2d9e939b-cc83-45a5-b643-b5eb4acdea16"><img src="https://github.com/midori-no-me/ichime/assets/11390039/2d9e939b-cc83-45a5-b643-b5eb4acdea16" width="250" /></a>
<a href="https://github.com/midori-no-me/ichime/assets/11390039/16be5b21-a869-4a32-b3f3-11cfe4f50a97"><img src="https://github.com/midori-no-me/ichime/assets/11390039/16be5b21-a869-4a32-b3f3-11cfe4f50a97" width="250" /></a>
<a href="https://github.com/midori-no-me/ichime/assets/11390039/3339bbc9-23b6-4131-8626-172001f45907"><img src="https://github.com/midori-no-me/ichime/assets/11390039/3339bbc9-23b6-4131-8626-172001f45907" width="250" /></a>
<a href="https://github.com/midori-no-me/ichime/assets/11390039/e7b35282-a157-4b5b-a97c-f130ab80733e"><img src="https://github.com/midori-no-me/ichime/assets/11390039/e7b35282-a157-4b5b-a97c-f130ab80733e" width="250" /></a>
<a href="https://github.com/midori-no-me/ichime/assets/11390039/10c0a60a-dcc6-4008-aea5-0984b80327c2"><img src="https://github.com/midori-no-me/ichime/assets/11390039/10c0a60a-dcc6-4008-aea5-0984b80327c2" width="250" /></a>


## Возможности приложения

Плеер:

- Нативный плеер - такой же, как в Safari и приложении "TV"
- Поддержка субтитров
- Поддержка AirPlay
- Плеер показывает название тайтла и номер серии внутри
- Серия автоматически помечается просмотренной, когда вы ее досмотрите до конца - так же, как на сайте

Ваша библиотека:

- Вы можете посмотреть список всех новых серий, которые вы еще не посмотрели
- Если перейти на страницу тайтла, то его можно добавить в свой список

Каталог тайтлов:

- Поиск
- Список онгоингов
- Просмотр базовой информации о тайтле

Мы не ставили перед собой задачу полностью покрыть все возможности сайта. Только минимально необходимый минимум, который покрывает большинство потребностей. Но если чего-то не хватает, то пишите.

## Как скачать

### iOS и iPadOS

Скачать можно через AltStore. Для этого вам потребуется компьютер на MacOS или Windows.

При релизе новой версии приложения AltStore уведомит вас об этом - вам нужно будет обновиться вручную.

> [!NOTE]
> Установка приложения через AltStore работает по тому же принципу, что и если бы вы собрали приложение из исходного кода через Xcode и установили его на свое устройство. Установленные таким образом приложения живут на вашем устройстве всего 7 дней, после чего удаляются. AltStore решает эту проблему и "обновляет" ваше приложение, чтобы оно не удалялось автоматически по истечении этого срока. Приложение "обновляется" автоматически с помощью AltServer, который вы устанавливаете на свой компьютер под управлением MacOS или Windows. "Обновление" происходит по Wi-Fi и не требует от вас каких-либо действий; главное - чтобы ваше устройство хотя бы раз в 7 дней было подключено к той же сети, в которой находится ваш компьютер.

### Как установить через AltStore

1. **Скачиваем IPA-файл**:
- Заходим на [страницу релизов](https://github.com/midori-no-me/ichime/releases/tag/1.0.1) с вашего устройства.
- Находим ссылку на скачивание IPA-файла нашего приложения `Ichime.ipa` и загружаем его.

2. **Устанвливаем AltStore**
- Скачиваем [AltStore](https://faq.altstore.io/) на ваш PC/Mac
- Устанавливаем по инструкции
- Устанавливаем его на ваше устройство

3. **Установка через AltStore**:
- Открываем AltStore на вашем iPhone или iPad.
- Переходим в раздел "Мои приложения".
- В правом верхнем углу касаемся кнопки "+".
- Находим скачанный IPA-файл нашего приложения и выбираем его.
- AltStore начнёт установку приложения на ваше устройство. Если потребуется, введите данные вашего Apple ID для подписи приложения.

4. **Доверяем разработчику**:
- После установки, если это ваша первая установка через AltStore, нужно довериться разработчику.
- Заходим в "Настройки" > "Основные" > "Управление устройством".
- Находим ваш Apple ID и кликаем его.
- Нажимаем "Доверять" и подтверждаем.

5. **Запускаем приложение**:
- Теперь вы можете открыть наше приложение прямо с главного экрана и наслаждаться аниме!

**Не забудьте, что приложения, установленные через AltStore, нужно обновлять каждые 7 дней**. Просто откройте AltStore и обновите приложения в разделе "Мои приложения".

### macOS

Мы не предоставляем сборки под macOS потому, она пока в разработке.

### tvOS

Единственная причина, по которой нет сборки под tvOS, - это потому, что не понятно как распространять приложение под эту платформу. Например, AltStore не умеет работать с tvOS, и работающих удобных аналогов мы не знаем. Если знаете, то пишите, а мы доработаем приложение.  

## Архитектура

Приложение построено на SwiftUI и AVKit.

### Взаимодействие с сайтом

У сайта есть HTTP API, но там поддерживаются не все возможности - только read-only запросы.

Все запросы с сессией пользователя, а также запросы, мутирующие состояние сервера, выполняются не к API, а к самому сайту - так, будто бы это запросы из браузера. Это значит, что некоторые данные получаются путем парсинга HTML самого сайта.

### Субтитры

Так как на сайте субтитры распространяются в формате `.vtt` ([WebVTT](https://en.wikipedia.org/wiki/WebVTT)), то с нашей стороны никаких дорабток не надо.

