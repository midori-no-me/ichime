# Ichime

Нативное приложение для сайта Anime 365, созданное специально для iOS и iPadOS.

## Возможности приложения

Плеер:

- Нативный плеер - такой же, как в Safari и приложении "TV"
- Поддержка субтитров
- Поддержка AirPlay (с работающими субтитрами!)
- Плеер показывает название тайтла и номер серии внутри
- Серия автоматически помечается просмотренной, когда вы ее досмотрите до конца - так же, как на сайте

Ваша библиотека:

- Вы можете посмотреть список всех новых серий, которые вы еще не посмотрели
- Если перейти на страницу тайтла, то его можно добавить в свой список

Каталог тайтлов:

- Поиск
- Список онгоингов
- Просмотр базовой информации о тайтле

Мы не ставили перед собой задачу полностью покрыть все возможности сайта. Только минимально необходимый минимум, который покрывает большинство потребностей. Но если чего-то не хватает, то пишите.

## Как скачать

### iOS и iPadOS

Скачать можно через AltStore. Для этого вам потребуется компьютер на MacOS или Windows.

При релизе новой версии приложения AltStore уведомит вас об этом - вам нужно будет обновиться вручную.

> [!NOTE]
> Установка приложения через AltStore работает по тому же принципу, что и если бы вы собрали приложение из исходного кода через Xcode и установили его на свое устройство. Установленные таким образом приложения живут на вашем устройстве всего 7 дней, после чего удаляются. AltStore решает эту проблему и "обновляет" ваше приложение, чтобы оно не удалялось автоматически по истечении этого срока. Приложение "обновляется" автоматически с помощью AltServer, который вы устанавливаете на свой компьютер под управлением MacOS или Windows. "Обновление" происходит по Wi-Fi и не требует от вас каких-либо действий; главное - чтобы ваше устройство хотя бы раз в 7 дней было подключено к той же сети, в которой находится ваш компьютер.

### macOS

Мы не предоставляем сборки под macOS потому, она пока в разработке.

### tvOS

Единственная причина, по которой нет сборки под tvOS, - это потому, что не понятно как распространять приложение под эту платформу. Например, AltStore не умеет работать с tvOS, и работающих удобных аналогов мы не знаем. Если знаете, то пишите, а мы доработаем приложение.  

## Архитектура

Приложение построено на SwiftUI и AVKit.

### Взаимодействие с сайтом

У сайта есть HTTP API, но там поддерживаются не все возможности - только read-only запросы.

Все запросы с сессией пользователя, а также запросы, мутирующие состояние сервера, выполняются не к API, а к самому сайту - так, будто бы это запросы из браузера. Это значит, что некоторые данные получаются путем парсинга HTML самого сайта.

### Субтитры

Так как на сайте субтитры распространяются в формате `.vtt` ([WebVTT](https://en.wikipedia.org/wiki/WebVTT)), то с нашей стороны никаких дорабток не надо.

